{% extends 'admin_nav.html' %}

{% block content %}
<style>
  .orders-container {
    margin-left: 240px; /* Aligns with your sidebar width */
    padding: 40px;
    background-color: #f4f7f6;
    min-height: 100vh;
  }
  .orders-table {
    width: 100%;
    border-collapse: collapse;
    background: #fff;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 5px 15px rgba(0,0,0,0.05);
  }
  .orders-table th, .orders-table td {
    padding: 15px;
    text-align: left;
    border-bottom: 1px solid #eee;
  }
  .orders-table th {
    background-color: #333;
    color: white;
    font-weight: 600;
  }
  .status-badge {
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: bold;
    background-color: #ffeaa7; /* Yellow for Pending */
    color: #d63031;
  }
</style>

<div class="orders-container">
  <h2>Customer Orders</h2>
  <table class="orders-table">
    <thead>
      <tr>
        <th>Order ID</th>
        <th>Customer</th>
        <th>Product</th>
        <th>Total Price</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
  {% for order in orders %}
  <tr>
    <td>#{{ order.id }}</td>
    <td>{{ order.user.username }}</td> 
    <td>{{ order.product.name }}</td>
    <td>â‚¹{{ order.total_price }}</td>
    <td>
      <form method="POST" action="{% url 'update_status' order.id %}" style="display: flex; gap: 10px; align-items: center;">
        {% csrf_token %}
        <select name="status" class="status-badge" style="border: 1px solid #ddd; cursor: pointer;">
          <option value="Pending" {% if order.status == 'Pending' %}selected{% endif %}>Pending</option>
          <option value="Packed" {% if order.status == 'Packed' %}selected{% endif %}>Packed</option>
          <option value="Shipped" {% if order.status == 'Shipped' %}selected{% endif %}>Shipped</option>
          <option value="Delivered" {% if order.status == 'Delivered' %}selected{% endif %}>Delivered</option>
        </select>
        <button type="submit" style="background: #2ecc71; color: white; border: none; padding: 5px 10px; border-radius: 6px; cursor: pointer; font-size: 0.8rem;">
          Update
        </button>
      </form>
    </td>
  </tr>
  {% empty %}
  <tr>
    <td colspan="5" style="text-align: center; padding: 30px;">No orders placed yet.</td>
  </tr>
  {% endfor %}
</tbody>
  </table>
</div>
{% endblock %}